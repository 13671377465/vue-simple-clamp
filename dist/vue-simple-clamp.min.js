!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).clamp=n()}(this,function(){"use strict";function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t){throw new Error('"'+t+'" is read-only')}function c(t){return null!=t&&"object"===p(t)&&!0===t["@@functional/placeholder"]}function i(e){return function t(n){return 0===arguments.length||c(n)?t:e.apply(this,arguments)}}function n(r){return function t(n,e){switch(arguments.length){case 0:return t;case 1:return c(n)?t:i(function(t){return r(n,t)});default:return c(n)&&c(e)?t:c(n)?i(function(t){return r(t,e)}):c(e)?i(function(t){return r(n,t)}):r(n,e)}}}function l(t,f){switch(t){case 0:return function(){return f.apply(this,arguments)};case 1:return function(t){return f.apply(this,arguments)};case 2:return function(t,n){return f.apply(this,arguments)};case 3:return function(t,n,e){return f.apply(this,arguments)};case 4:return function(t,n,e,r){return f.apply(this,arguments)};case 5:return function(t,n,e,r,u){return f.apply(this,arguments)};case 6:return function(t,n,e,r,u,o){return f.apply(this,arguments)};case 7:return function(t,n,e,r,u,o,i){return f.apply(this,arguments)};case 8:return function(t,n,e,r,u,o,i,a){return f.apply(this,arguments)};case 9:return function(t,n,e,r,u,o,i,a,c){return f.apply(this,arguments)};case 10:return function(t,n,e,r,u,o,i,a,c,l){return f.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function f(o,i,a){return function(){for(var t=[],n=0,e=o,r=0;r<i.length||n<arguments.length;){var u;r<i.length&&(!c(i[r])||n>=arguments.length)?u=i[r]:(u=arguments[n],n+=1),c(t[r]=u)||(e-=1),r+=1}return e<=0?a.apply(this,t):l(e,f(o,t,a))}}var u=n(function(t,n){return 1===t?i(n):l(t,f(t,[],n))});function t(o){return function t(e,r,u){switch(arguments.length){case 0:return t;case 1:return c(e)?t:n(function(t,n){return o(e,t,n)});case 2:return c(e)&&c(r)?t:c(e)?n(function(t,n){return o(t,r,n)}):c(r)?n(function(t,n){return o(e,t,n)}):i(function(t){return o(e,r,t)});default:return c(e)&&c(r)&&c(u)?t:c(e)&&c(r)?n(function(t,n){return o(t,n,u)}):c(e)&&c(u)?n(function(t,n){return o(t,r,n)}):c(r)&&c(u)?n(function(t,n){return o(e,t,n)}):c(e)?i(function(t){return o(t,r,u)}):c(r)?i(function(t){return o(e,t,u)}):c(u)?i(function(t){return o(e,r,t)}):o(e,r,u)}}}var a=Array.isArray||function(t){return null!=t&&0<=t.length&&"[object Array]"===Object.prototype.toString.call(t)};function e(u,o,i){return function(){if(0===arguments.length)return i();var t,n=Array.prototype.slice.call(arguments,0),e=n.pop();if(!a(e)){for(var r=0;r<u.length;){if("function"==typeof e[u[r]])return e[u[r]].apply(e,n);r+=1}if(null!=(t=e)&&"function"==typeof t["@@transducer/step"])return o.apply(null,n)(e)}return i.apply(this,arguments)}}var r={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}},o=n(function(t,n){return t<n?n:t});function s(t,n){for(var e=0,r=n.length,u=Array(r);e<r;)u[e]=t(n[e]),e+=1;return u}function y(t){return"[object String]"===Object.prototype.toString.call(t)}var h=i(function(t){return!!a(t)||!!t&&("object"===p(t)&&(!y(t)&&(1===t.nodeType?!!t.length:0===t.length||0<t.length&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))}),d=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,n){return this.f(t,n)},t}();function g(t){return new d(t)}var v=n(function(t,n){return l(t.length,function(){return t.apply(n,arguments)})});function b(t,n,e){for(var r=e.next();!r.done;){if((n=t["@@transducer/step"](n,r.value))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}r=e.next()}return t["@@transducer/result"](n)}function w(t,n,e,r){return t["@@transducer/result"](e[r](v(t["@@transducer/step"],t),n))}var j="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function O(t,n,e){if("function"==typeof t&&(t=g(t)),h(e))return function(t,n,e){for(var r=0,u=e.length;r<u;){if((n=t["@@transducer/step"](n,e[r]))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}r+=1}return t["@@transducer/result"](n)}(t,n,e);if("function"==typeof e["fantasy-land/reduce"])return w(t,n,e,"fantasy-land/reduce");if(null!=e[j])return b(t,n,e[j]());if("function"==typeof e.next)return b(t,n,e);if("function"==typeof e.reduce)return w(t,n,e,"reduce");throw new TypeError("reduce: list must be array or iterable")}function C(t,n){return Object.prototype.hasOwnProperty.call(n,t)}var S=Object.prototype.toString,x=function(){return"[object Arguments]"===S.call(arguments)?function(t){return"[object Arguments]"===S.call(t)}:function(t){return C("callee",t)}}(),A=!{toString:null}.propertyIsEnumerable("toString"),T=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],E=function(){return arguments.propertyIsEnumerable("length")}(),k=function(t,n){for(var e=0;e<t.length;){if(t[e]===n)return!0;e+=1}return!1},q="function"!=typeof Object.keys||E?i(function(t){if(Object(t)!==t)return[];var n,e,r=[],u=E&&x(t);for(n in t)!C(n,t)||u&&"length"===n||(r[r.length]=n);if(A)for(e=T.length-1;0<=e;)C(n=T[e],t)&&!k(r,n)&&(r[r.length]=n),e-=1;return r}):i(function(t){return Object(t)!==t?[]:Object.keys(t)}),M=t(O),N=i(function(t){return function(){return t}});function U(t){return"[object Function]"===Object.prototype.toString.call(t)}var H=i(function(t){return u(t.length,t)});var V=i(function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});function L(t,n){return function(){return n.call(this,t.apply(this,arguments))}}function I(e,r){return function(){var t=arguments.length;if(0===t)return r();var n=arguments[t-1];return a(n)||"function"!=typeof n[e]?r.apply(this,arguments):n[e].apply(n,Array.prototype.slice.call(arguments,0,t-1))}}var F=t(I("slice",function(t,n,e){return Array.prototype.slice.call(e,t,n)})),P=i(I("tail",F(1,1/0)));var R=i(function(t){return y(t)?t.split("").reverse().join(""):Array.prototype.slice.call(t,0).reverse()});function z(){if(0===arguments.length)throw new Error("compose requires at least one argument");return function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return l(arguments[0].length,M(L,arguments[0],P(arguments)))}.apply(this,R(arguments))}function B(t){return t}var D=i(B);function $(t){for(var n,e=[];!(n=t.next()).done;)e.push(n.value);return e}function W(t,n,e){for(var r=0,u=e.length;r<u;){if(t(n,e[r]))return!0;r+=1}return!1}var X="function"==typeof Object.is?Object.is:function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n};function Y(t,n,e,r){var u=$(t);function o(t,n){return Z(t,n,e.slice(),r.slice())}return!W(function(t,n){return!W(o,n,t)},$(n),u)}function Z(t,n,e,r){if(X(t,n))return!0;var u,o,i=V(t);if(i!==V(n))return!1;if(null==t||null==n)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof n["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](n)&&"function"==typeof n["fantasy-land/equals"]&&n["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof n.equals)return"function"==typeof t.equals&&t.equals(n)&&"function"==typeof n.equals&&n.equals(t);switch(i){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===(u=t.constructor,null==(o=String(u).match(/^function (\w*)/))?"":o[1]))return t===n;break;case"Boolean":case"Number":case"String":if(p(t)!==p(n)||!X(t.valueOf(),n.valueOf()))return!1;break;case"Date":if(!X(t.valueOf(),n.valueOf()))return!1;break;case"Error":return t.name===n.name&&t.message===n.message;case"RegExp":if(t.source!==n.source||t.global!==n.global||t.ignoreCase!==n.ignoreCase||t.multiline!==n.multiline||t.sticky!==n.sticky||t.unicode!==n.unicode)return!1}for(var a=e.length-1;0<=a;){if(e[a]===t)return r[a]===n;a-=1}switch(i){case"Map":return t.size===n.size&&Y(t.entries(),n.entries(),e.concat([t]),r.concat([n]));case"Set":return t.size===n.size&&Y(t.values(),n.values(),e.concat([t]),r.concat([n]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var c=q(t);if(c.length!==q(n).length)return!1;var l=e.concat([t]),f=r.concat([n]);for(a=c.length-1;0<=a;){var s=c[a];if(!C(s,n)||!Z(n[s],t[s],l,f))return!1;a-=1}return!0}var _=n(function(t,n){return Z(t,n,[],[])});function G(t,n){return 0<=function(t,n,e){var r,u;if("function"==typeof t.indexOf)switch(p(n)){case"number":if(0===n){for(r=1/n;e<t.length;){if(0===(u=t[e])&&1/u===r)return e;e+=1}return-1}if(n==n)return t.indexOf(n,e);for(;e<t.length;){if("number"==typeof(u=t[e])&&u!=u)return e;e+=1}return-1;case"string":case"boolean":case"function":case"undefined":return t.indexOf(n,e);case"object":if(null===n)return t.indexOf(n,e)}for(;e<t.length;){if(_(t[e],n))return e;e+=1}return-1}(n,t,0)}function J(t){return'"'+t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var K=function(t){return(t<10?"0":"")+t},Q="function"==typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+K(t.getUTCMonth()+1)+"-"+K(t.getUTCDate())+"T"+K(t.getUTCHours())+":"+K(t.getUTCMinutes())+":"+K(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};var tt=function(){function t(t,n){this.xf=n,this.f=t}return t.prototype["@@transducer/init"]=r.init,t.prototype["@@transducer/result"]=r.result,t.prototype["@@transducer/step"]=function(t,n){return this.f(n)?this.xf["@@transducer/step"](t,n):t},t}(),nt=n(e(["filter"],n(function(t,n){return new tt(t,n)}),function(e,r){return t=r,"[object Object]"===Object.prototype.toString.call(t)?O(function(t,n){return e(r[n])&&(t[n]=r[n]),t},{},q(r)):function(t,n){for(var e=0,r=n.length,u=[];e<r;)t(n[e])&&(u[u.length]=n[e]),e+=1;return u}(e,r);var t})),et=n(function(t,n){return nt((e=t,function(){return!e.apply(this,arguments)}),n);var e});var rt=i(function(t){return function e(r,u){var o=function(t){var n=u.concat([r]);return G(t,n)?"<Circular>":e(t,n)},t=function(n,t){return s(function(t){return J(t)+": "+o(n[t])},t.slice().sort())};switch(Object.prototype.toString.call(r)){case"[object Arguments]":return"(function() { return arguments; }("+s(o,r).join(", ")+"))";case"[object Array]":return"["+s(o,r).concat(t(r,et(function(t){return/^\d+$/.test(t)},q(r)))).join(", ")+"]";case"[object Boolean]":return"object"===p(r)?"new Boolean("+o(r.valueOf())+")":r.toString();case"[object Date]":return"new Date("+(isNaN(r.valueOf())?o(NaN):J(Q(r)))+")";case"[object Null]":return"null";case"[object Number]":return"object"===p(r)?"new Number("+o(r.valueOf())+")":1/r==-1/0?"-0":r.toString(10);case"[object String]":return"object"===p(r)?"new String("+o(r.valueOf())+")":J(r);case"[object Undefined]":return"undefined";default:if("function"==typeof r.toString){var n=r.toString();if("[object Object]"!==n)return n}return"{"+t(r,q(r)).join(", ")+"}"}}(t,[])}),ut=n(function(t,n){if(a(t)){if(a(n))return t.concat(n);throw new TypeError(rt(n)+" is not an array")}if(y(t)){if(y(n))return t+n;throw new TypeError(rt(n)+" is not a string")}if(null!=t&&U(t["fantasy-land/concat"]))return t["fantasy-land/concat"](n);if(null!=t&&U(t.concat))return t.concat(n);throw new TypeError(rt(t)+' does not have a method named "concat" or "fantasy-land/concat"')}),ot=n(function(t,n){return null==n||n!=n?t:n});var it=n(function(t,n){return t/n}),at=i(function(r){return u(r.length,function(t,n){var e=Array.prototype.slice.call(arguments,0);return e[0]=n,e[1]=t,r.apply(this,e)})}),ct=n(function(t,n){if(0===t.length)return!1;for(var e=n,r=0;r<t.length;){if(!C(t[r],e))return!1;e=e[t[r]],r+=1}return!0}),lt=n(function(t,n){return ct([t],n)}),ft=t(function(t,n,e){return u(Math.max(t.length,n.length,e.length),function(){return t.apply(this,arguments)?n.apply(this,arguments):e.apply(this,arguments)})}),st=n(function(n,e){return u(n+1,function(){var t=arguments[n];if(null!=t&&U(t[e]))return t[e].apply(t,Array.prototype.slice.call(arguments,0,n));throw new TypeError(rt(t)+' does not have a method named "'+e+'"')})}),pt=n(function(t,n){return t*n});var yt=t(function(t,n,e){return e.replace(t,n)});var ht=n(function(t,n){if(e=t,"[object RegExp]"!==Object.prototype.toString.call(e))throw new TypeError("‘test’ requires a value of type RegExp as its first argument; received "+rt(t));var e,r;return(r=t,new RegExp(r.source,(r.global?"g":"")+(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.sticky?"y":"")+(r.unicode?"u":""))).test(n)}),dt=st(0,"toUpperCase"),gt="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",vt=(i("function"==typeof String.prototype.trim&&!gt.trim()&&"​".trim()?function(t){return t.trim()}:function(t){var n=new RegExp("^["+gt+"]["+gt+"]*"),e=new RegExp("["+gt+"]["+gt+"]*$");return t.replace(n,"").replace(e,"")}),ft(_("float"),N("styleFloat"),D)),mt=/(\-([a-z]){1})/g,bt=ft(ht(mt),yt(mt,function(){return dt(arguments.length<=2?void 0:arguments[2])}),D),wt=function(t,n){var e=z(bt,vt)(n);return t.currentStyle&&t.currentStyle[e]?t.currentStyle[e]:null},jt=ft(function(){return lt("getComputedStyle",window)},z(function(t){return t.getPropertyValue.bind(t)},function(t){return window.getComputedStyle(t,null)}),function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return H(wt)(n)});function Ot(t){var n=jt(t),e=n("line-height");return _(e,"normal")?pt(parseInt(n("font-size")),1.4):parseInt(e)}function Ct(t,n){var e=z(Math.floor,it),r=ot(t.clientHeight)(n),u=Ot(t);return o(0,e(r,u))}function St(o){var i,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a={clamp:t.clamp||2,useNativeClamp:void 0===t.useNativeClamp||t.useNativeClamp,splitOnChars:t.splitOnChars||[".","。","，",","," "],animate:t.animate||!1,truncationChar:t.truncationChar||"…",truncationHTML:t.truncationHTML},n=o.style,e=o.innerHTML,r=void 0!==o.style.webkitLineClamp,u=a.clamp,c=u.indexOf&&(-1<u.indexOf("px")||-1<u.indexOf("em"));a.truncationHTML&&((i=document.createElement("span")).innerHTML=a.truncationHTML);var l,f,s,p,y=a.splitOnChars.slice(0),h=y[0],d=H(at(function(t,n){return ut(t,n.truncationChar)}));function g(t){return t.lastChild.children&&0<t.lastChild.children.length?g(Array.prototype.slice.call(t.children).pop()):t.lastChild&&t.lastChild.nodeValue&&""!==t.lastChild.nodeValue&&t.lastChild.nodeValue!==a.truncationChar?t.lastChild:(t.lastChild.parentNode.removeChild(t.lastChild),g(t))}if("auto"==u?(m("clampValue"),u=Ct(o)):c&&(m("clampValue"),u=Ct(o,parseInt(u))),r&&a.useNativeClamp)n.overflow="hidden",n.textOverflow="ellipsis",n.webkitBoxOrient="vertical",n.display="-webkit-box",n.webkitLineClamp=u,c&&(n.height=a.clamp+"px");else{var v=(p=u,pt(Ot(o),p));v<=o.clientHeight&&(s=function t(n,e){var r=d(a);if(e){var u=n.nodeValue.replace(a.truncationChar,"");if(l||(h=0<y.length?y.shift():"",l=u.split(h)),1<l.length?(f=l.pop(),n.nodeValue=r(l.join(h))):l=null,i&&(n.nodeValue=n.nodeValue.replace(a.truncationChar,""),o.innerHTML=n.nodeValue+" "+i.innerHTML+a.truncationChar),l){if(o.clientHeight<=e){if(!(0<=y.length&&""!=h))return o.innerHTML;n.nodeValue=r(l.join(h)+h+f),l=null}}else""==h&&(n.nodeValue=r(""),n=g(o),y=a.splitOnChars.slice(0),h=y[0],f=l=null);if(!a.animate)return t(n,e);setTimeout(function(){t(n,e)},!0===a.animate?10:a.animate)}}(g(o),v))}return{original:e,clamped:s}}var xt=function(t,n){St(t,n.value)},At={install:function(t){t.directive("clamp",{inserted:xt,componentUpdated:xt})}};return At});
